import Head from 'next/head'
import Image from 'next/image'
import imageLoader from "../imageloader"
import styles from '../styles/Home.module.css'
import type {GetStaticProps,NextPage} from "next"
import {Character, GetCharacterResults} from "../types"
import Link from 'next/link'


const Home:NextPage<{characters:Character[]}> = ({characters}) => {
  return (
    <div className={styles.container}>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      {characters.map((character)=>{
        return <div key={character.id}>
          <Link href={`/characters/${character.id}`}>
            <h1>{character.name}</h1>
          </Link>
        <Image
        loader ={imageLoader}
        unoptimized
        src={character.image}
        alt={character.name}
        width="400"
        height="400"
        />

          </div>
      })}
    </div>
 
  )
}
export const getStaticProps: GetStaticProps = async (bollocks)=> {
  const params = new URLSearchParams({ page: "1" }).toString()
  const res = await fetch (`https://rickandmortyapi.com/api/character?${params}`)
  const{results}: GetCharacterResults  = await res.json();
 return {
  props:{
    characters: results,
  },
 }
}
export default Home